<!-- Lunr.js Search Integration -->
<script src="https://unpkg.com/lunr@2.3.9/lunr.min.js"></script>
<script>
// Search index will be generated by Hugo and loaded here
window.searchIndex = null;
window.searchData = [];

// Initialize search when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Load search index
    fetch('/search-index.json')
        .then(response => response.json())
        .then(data => {
            window.searchIndex = lunr.Index.load(data.index);
            window.searchData = data.docs;
            console.log('Search index loaded successfully');
        })
        .catch(error => {
            console.error('Failed to load search index:', error);
            // Fallback to basic search
            setupFallbackSearch();
        });
});

function setupFallbackSearch() {
    console.log('Setting up fallback search');
    // Basic search implementation without Lunr.js
    window.searchIndex = {
        search: function(query) {
            return window.searchData.filter(doc => 
                doc.title.toLowerCase().includes(query.toLowerCase()) ||
                doc.content.toLowerCase().includes(query.toLowerCase())
            ).map((doc, index) => ({ ref: index, score: 1 }));
        }
    };
}
</script>
